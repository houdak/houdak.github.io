---
import Layout from '../layouts/Layout.astro';

// ── Add your images here ─────────────────────────────────────────────────────
// Each entry: { src, alt, caption? }
// Place image files in the public/ folder, then reference as "/your-image.jpg"
const images: { src: string; alt: string; caption?: string }[] = [
	// { src: "/microscopy-1.jpg", alt: "Confocal image of hippocampal neurons", caption: "CA1 pyramidal neurons, mouse hippocampus" },
	// { src: "/synapse.jpg",      alt: "Synapse electron micrograph",           caption: "Dendritic spine undergoing LTP" },
	// Add more images above this line
];

// ── Add your videos here ─────────────────────────────────────────────────────
// Each entry: { embedUrl, title, caption? }
// For YouTube: use the embed URL format https://www.youtube.com/embed/VIDEO_ID
const videos: { embedUrl: string; title: string; caption?: string }[] = [
	// { embedUrl: "https://www.youtube.com/embed/VIDEO_ID", title: "Calcium imaging timelapse", caption: "GCaMP6 activity in cortical neurons" },
	// Add more videos above this line
];

const hasImages = images.length > 0;
const hasVideos = videos.length > 0;
---

<Layout title="Gallery — Houda Khaled">
	<main>
		<header class="page-header">
			<p class="eyebrow">Fun Science</p>
			<h1>Gallery</h1>
			<div class="rule"></div>
		</header>

		{hasImages && (
			<section class="section reveal">
				<h2 class="section-label">Images</h2>
				<div class="image-grid">
					{images.map(img => (
						<figure class="img-card">
							<img src={img.src} alt={img.alt} loading="lazy" />
							{img.caption && <figcaption>{img.caption}</figcaption>}
						</figure>
					))}
				</div>
			</section>
		)}

		{hasVideos && (
			<section class="section reveal">
				<h2 class="section-label">Videos</h2>
				<div class="video-list">
					{videos.map(vid => (
						<figure class="video-card">
							<div class="video-wrap">
								<iframe
									src={vid.embedUrl}
									title={vid.title}
									allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
									allowfullscreen
									loading="lazy"
								></iframe>
							</div>
							{vid.caption && <figcaption>{vid.caption}</figcaption>}
						</figure>
					))}
				</div>
			</section>
		)}

		{!hasImages && !hasVideos && (
			<section class="empty-state reveal">
				<div class="empty-reticle" aria-hidden="true">
					<div class="reticle-ring"></div>
					<div class="reticle-cross h"></div>
					<div class="reticle-cross v"></div>
				</div>
				<p class="empty-text">Images and videos coming soon.</p>
				<p class="empty-meta">No signal detected · Awaiting acquisition</p>
			</section>
		)}
	</main>
</Layout>

<script>
	document.addEventListener('astro:page-load', () => {
		const reveals = document.querySelectorAll<HTMLElement>('.reveal');
		const io = new IntersectionObserver((entries) => {
			entries.forEach(e => {
				if (e.isIntersecting) {
					(e.target as HTMLElement).classList.add('in-view');
					io.unobserve(e.target);
				}
			});
		}, { threshold: 0.05 });
		reveals.forEach(el => io.observe(el));
	});
</script>

<style>
	main {
		position: relative;
		z-index: 1;
		max-width: 900px;
		margin: 0 auto;
		padding: 3rem 1.5rem 7rem;
	}

	/* ── Page header ── */
	.page-header { margin-bottom: 4rem; }

	.eyebrow {
		font-family: 'Space Mono', monospace;
		font-size: 0.68rem;
		letter-spacing: 0.14em;
		text-transform: uppercase;
		color: var(--ink-muted);
		margin-bottom: 0.6rem;
	}

	h1 {
		font-family: 'Space Grotesk', sans-serif;
		font-weight: 700;
		font-size: clamp(3rem, 10vw, 5.5rem);
		line-height: 0.95;
		letter-spacing: -0.03em;
		margin-bottom: 1.5rem;
		color: var(--ink);
		text-shadow:
			0 0 50px rgba(0,255,239,0.2),
			0 0 120px rgba(0,255,239,0.07);
	}

	.rule {
		height: 1px;
		background: linear-gradient(to right, var(--cfp), var(--ink-dim) 55%, transparent);
	}

	/* ── Sections ── */
	.section { margin-bottom: 4.5rem; }

	.section-label {
		display: flex;
		align-items: center;
		gap: 0.65rem;
		font-family: 'Space Mono', monospace;
		font-size: 0.68rem;
		font-weight: 700;
		letter-spacing: 0.14em;
		text-transform: uppercase;
		color: var(--cfp);
		margin-bottom: 1.5rem;
		padding-bottom: 0.6rem;
		border-bottom: 1px solid var(--ink-dim);
	}
	.section-label::before {
		content: '';
		display: inline-block;
		width: 8px;
		height: 8px;
		border-radius: 50%;
		background: var(--cfp);
		box-shadow: 0 0 8px var(--cfp), 0 0 18px rgba(0,255,239,0.45);
		flex-shrink: 0;
	}

	/* ── Image grid ── */
	.image-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
		gap: 1.5rem;
	}

	.img-card {
		display: flex;
		flex-direction: column;
		gap: 0.5rem;
		cursor: crosshair;
	}

	.img-card img {
		display: block;
		width: 100%;
		aspect-ratio: 1;
		object-fit: cover;
		border: 1px solid var(--ink-dim);
		transition: box-shadow 0.4s ease, border-color 0.4s ease;
	}

	.img-card:hover img {
		border-color: rgba(0,255,239,0.4);
		box-shadow:
			0 0 20px rgba(0,255,239,0.25),
			0 0 50px rgba(0,255,239,0.08);
	}

	figcaption {
		font-family: 'Space Mono', monospace;
		font-size: 0.65rem;
		color: var(--ink-muted);
		line-height: 1.45;
	}

	/* ── Video list ── */
	.video-list { display: flex; flex-direction: column; gap: 2.5rem; }

	.video-card { display: flex; flex-direction: column; gap: 0.75rem; }

	.video-wrap {
		position: relative;
		width: 100%;
		aspect-ratio: 16 / 9;
		border: 1px solid var(--ink-dim);
		overflow: hidden;
		background: var(--bg-2);
		transition: border-color 0.3s, box-shadow 0.3s;
	}
	.video-wrap:hover {
		border-color: rgba(0,255,239,0.35);
		box-shadow: 0 0 25px rgba(0,255,239,0.1);
	}

	.video-wrap iframe {
		position: absolute;
		inset: 0;
		width: 100%;
		height: 100%;
		border: none;
	}

	/* ── Empty state — microscope reticle ── */
	.empty-state {
		padding: 5rem 0;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: 1.5rem;
	}

	.empty-reticle {
		position: relative;
		width: 80px;
		height: 80px;
		opacity: 0.3;
	}

	.reticle-ring {
		position: absolute;
		inset: 0;
		border-radius: 50%;
		border: 1px solid var(--cfp);
		box-shadow: 0 0 10px rgba(0,255,239,0.3);
	}

	.reticle-cross {
		position: absolute;
		background: var(--cfp);
	}
	.reticle-cross.h {
		width: 100%; height: 1px;
		top: 50%; left: 0;
	}
	.reticle-cross.v {
		width: 1px; height: 100%;
		left: 50%; top: 0;
	}

	.empty-text {
		font-family: 'Space Grotesk', sans-serif;
		font-size: 1.2rem;
		font-weight: 500;
		color: var(--ink-muted);
	}

	.empty-meta {
		font-family: 'Space Mono', monospace;
		font-size: 0.65rem;
		letter-spacing: 0.1em;
		text-transform: uppercase;
		color: var(--ink-muted);
		opacity: 0.5;
	}
</style>
